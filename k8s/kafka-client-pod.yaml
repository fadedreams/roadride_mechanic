apiVersion: v1
kind: Pod
metadata:
  name: kafka-client
  namespace: roadride
spec:
  containers:
  - name: kafka-client
    image: confluentinc/cp-kafka:latest
    command: ["/bin/bash"]
    args: ["-c", "sleep infinity"]  # Keeps the pod running for interactive use
    volumeMounts:
    - name: client-config
      mountPath: /tmp/client.properties
      subPath: client.properties
    resources:
      requests:
        memory: 256Mi
        cpu: 100m
  volumes:
  - name: client-config
    configMap:
      name: kafka-client-config
  restartPolicy: Never
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: kafka-client-config
  namespace: roadride
data:
  client.properties: |
    security.protocol=SASL_PLAINTEXT
    sasl.mechanism=SCRAM-SHA-256
    sasl.jaas.config=org.apache.kafka.common.security.scram.ScramLoginModule required username="user1" password="eeFsnvVHhM";
